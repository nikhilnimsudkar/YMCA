<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
	pageEncoding="ISO-8859-1"%>
<body>
	<%@ include file="../../layouts/include_taglib.jsp"%>
	<div id="main544">
		<div id="content33">
			<div id="contentFormDiv223">
				
				<div id="payment-Error-Box" type="text/x-kendo-template" style="display:none;">
				    <p class="error-message-p payment-Error-Box-msg-p"></p>
					
				    <div class="confirmbutton" align="center"><button class="confirm-payment-process k-button" style=" width: 35%;">Ok</button>  </div> 
				</div>
				
				<table align="center" border="0" cellpadding="0" cellspacing="0">
				<tr><td> 
				<!-- Smart Wizard -->
				        
				  		<div id="wizard" class="swMain">
				  			<ul>
				  				<li>
					  				<a href="#step-1">
					                <!-- <label class="stepNumber">1</label> -->
					                <span class="stepDesc">
					                  1. PRODUCT INFORMATION<br />
					                   <!-- <small>&nbsp;</small> -->
					                </span>
					            	</a>
				            	</li>
				  				<li><a href="#step-2">
				                <!-- <label class="stepNumber">1</label> -->
				                <span class="stepDesc">
				                  2. USER INFORMATION	<br />
				                   <!-- <small>&nbsp;</small> -->
				                </span>
				            </a></li>
				  				<li><a href="#step-3">
				               <!--  <label class="stepNumber">2</label> -->
				                <span class="stepDesc">
				                   3. T & C<br />
				                   <!-- <small>Step 2 description</small> -->
				                </span>
				            </a></li>
				            <li><a href="#step-4">
				               <!--  <label class="stepNumber">2</label> -->
				                <span class="stepDesc">
				                   4. Payment Information<br />
				                   <!-- <small>Step 2 description</small> -->
				                </span>
				            </a></li>
				            <li><a href="#step-5">
				               <!--  <label class="stepNumber">2</label> -->
				                <span class="stepDesc">
				                   5. Summary<br />
				                   <!-- <small>Step 2 description</small> -->
				                </span>
				            </a></li>
				  			</ul>
				  			<div id="step-1">	
				            <p>
				            <div class="border-bottom-h3">
				            	<span style="margin-right: 15px;"> Please select YMCA location</span>
				            <select name="location" id="location" style="width:250px;" ><br />
										<option value="0">--Select Location--</option>
										<c:forEach var="location" items="${locations}" varStatus="count">
											<option value="${location.locationId }">${location.branchName }</option>
										</c:forEach>
							</select> 
							
							<select style="width:250px; display: none; margin-left : 10px;" id="prefLocation" name="prefLocation" >
																	
							</select>
							</div>	
							
							<div id="allLocations" style="display:none;">
								<option value="0">--Select Preferred Location--</option>
								<c:forEach var="location" items="${locations}" varStatus="count">
									<c:if test="${ location.branchName != 'All Branches' && location.branchName != 'Bay Area' }">
										<option value="${location.locationId }">${location.branchName }</option>
									</c:if>					
								</c:forEach>	
							</div>
							
							<div id="bayAreaLocations" style="display:none;">
								<option value="0">--Select Preferred Location--</option>
								<c:forEach var="location1" items="${bayAreaLocations}" varStatus="count">
									<option value="${location1.locationId }">${location1.branchName }</option>
								</c:forEach>
							</div>	
							
							<div id="example" style="margin-top: 10px;">
				            	<div id="grid"></div>
				            </div>     
							
							</div>
							<div id="step-2">			
							<div id="registerDiv" >
				            	<form:form commandName="account" method="post" action="becomeMemberRegister" id="becomeMemberForm" style="border : none; padding : 0px; margin : 0px; max-width: 100%;" autocomplete="off"
							              class="bootstrap-frm cmxform" >			        
									 <table border="0" width="100%" id="userInfoTb">					 						 
									 	<tr>
									 		<td colspan="2"><h2 style="margin-top: 5px; margin-bottom : 5px;"><span>USER INFORMATION</span></h2> </td>
									 		<td >&nbsp;</td>
									 		<td > <span id="memberSignInSpan" class="k-button" style="width: 70px;text-shadow: none;float: right; margin-left:10px; ">Sign in</span></td>
									 		<!-- <span id="newMemberSpan" class="k-button" style="width: 70px;text-shadow: none;float: right; ">New Member?</span> -->
									 	</tr>
									 	<tr>
									 		<td><form:input cssClass="form-control" path="userLst[0].firstName" title="Please enter yout First Name" name="firstName" id="firstName" maxlength="50" placeholder="First Name"  /></td>					 		
									 		<td>&nbsp;</td>
									 		<td><form:input cssClass="form-control" path="userLst[0].lastName" title="Please enter yout Last Name" name="lastName" id="lastName" maxlength="50" placeholder="Last Name" /></td>
									 		<td>&nbsp;</td>
									 	</tr>
									 	<tr>		 		
									 		<td><form:input  path="userLst[0].dateOfBirth" title="Please enter your Date of Birth" name="dob" id="dob" maxlength="50" placeholder="D.O.B"  style="width: 205px; " /></td>		
									 		<td id="dop-er"></td>
									 		<td><form:input cssClass="form-control" path="userLst[0].phoneNumber" title="Please enter your Phone Number" name="phoneNumber" id="phoneNumber" maxlength="50" placeholder="Phone Number" /></td>
									 		<td></td>
									 	</tr>
										<tr>		 		
									 		<td><form:input cssClass="form-control" path="userLst[0].email"  name="email" id="email"  maxlength="50" placeholder="Email"  /></td>			 							 		
									 		<td></td>
									 		<td></td>
									 		<td></td>
									 	</tr>
									 	<tr>		 		
									 		<td>
									 			<span class="k-block k-success-colored" id="emailSuccessSpan"></span>
												<span class="k-block k-error-colored" id="emailErrorSpan"></span>
											</td>			 							 		
									 		<td></td>
									 		<td></td>
									 		<td></td>
									 	</tr>
										<tr>
									 		<td><form:password cssClass="form-control" path="userLst[0].password" name="password" id="password" maxlength="50" placeholder="Password" /></td>
									 		<td></td>
									 		<td><form:password cssClass="form-control" path="userLst[0].confirmPassword" id="confirm_password" name="confirm_password" maxlength="50" placeholder="Confirm Password" /></td>
									 		<td></td>
									 	</tr>
									 	
										 <tr>
										 		<td colspan="2"><h2 style="margin-top: 5px; margin-bottom : 5px;"><span>ADDRESS</span></h2> </td>
										 		<td></td>
										 		<td></td>
										 		<td></td>
										 </tr>
										 <tr>
										 		<td><form:input cssClass="form-control" path="addressLine1" name="addressLine1" id="addressLine1" maxlength="50" placeholder="Address 1" /></td>
										 		<td></td>
										 		<td><form:input cssClass="form-control" path="addressLine2" name="addressLine2" id="addressLine2" maxlength="50" placeholder="Address 2" /></td>
										 		<td></td>
										 </tr>
									 	<tr>
									 		<td><form:input cssClass="form-control" path="city" name="city" id="city" maxlength="50" placeholder="City" title="Please enter yout City"/></td>						
											<td></td>
											<td>
												<select size="1" id="state" name="state" style="width: 205px;  line-height: 15px; height: 30px; margin-bottom: 5px; padding: 5px 0px 5px 5px;">
													<option value="">--Select State/Province--</option>
													<option value="ZZ">Not USA or Canada</option>
													<option value="AA">APO AA</option>
													<option value="AE">APO AE</option>
													<option value="AP">APO AP</option>
													<option value="AL">Alabama</option>
													<option value="AK">Alaska</option>
													<option value="AB">Alberta</option>
													<option value="AS">American Samoa</option>
													<option value="AZ">Arizona</option>
													<option value="AR">Arkansas</option>
													<option value="BC">British Columbia</option>
													<option value="CA" selected="">California</option>
													<option value="CO">Colorado</option>
													<option value="CT">Connecticut</option>
													<option value="DE">Delaware</option>
													<option value="DC">District of Columbia</option>
													<option value="FL">Florida</option>
													<option value="GA">Georgia</option>
													<option value="GU">Guam</option>
													<option value="HI">Hawaii</option>
													<option value="ID">Idaho</option>
													<option value="IL">Illinois</option>
													<option value="IN">Indiana</option>
													<option value="IA">Iowa</option>
													<option value="KS">Kansas</option>
													<option value="KY">Kentucky</option>
													<option value="LA">Louisiana</option>
													<option value="ME">Maine</option>
													<option value="MB">Manitoba</option>
													<option value="MD">Maryland</option>
													<option value="MA">Massachusetts</option>
													<option value="MI">Michigan</option>
													<option value="MN">Minnesota</option>
													<option value="MS">Mississippi</option>
													<option value="MO">Missouri</option>
													<option value="MT">Montana</option>
													<option value="NE">Nebraska</option>
													<option value="NV">Nevada</option>
													<option value="NB">New Brunswick</option>
													<option value="NH">New Hampshire</option>
													<option value="NJ">New Jersey</option>
													<option value="NM">New Mexico</option>
													<option value="NY">New York</option>
													<option value="NL">Newfoundland and Labrador</option>
													<option value="NC">North Carolina</option>
													<option value="ND">North Dakota</option>
													<option value="MP">Northern Mariana Islands</option>
													<option value="NT">Northwest Territories</option>
													<option value="NS">Nova Scotia</option>
													<option value="NU">Nunavut</option>
													<option value="OH">Ohio</option>
													<option value="OK">Oklahoma</option>
													<option value="ON">Ontario</option>
													<option value="OR">Oregon</option>
													<option value="PA">Pennsylvania</option>
													<option value="PE">Prince Edward Island</option>
													<option value="PR">Puerto Rico</option>
													<option value="QC">Quebec</option>
													<option value="RI">Rhode Island</option>
													<option value="SK">Saskatchewan</option>
													<option value="SC">South Carolina</option>
													<option value="SD">South Dakota</option>
													<option value="TN">Tennessee</option>
													<option value="TX" >Texas</option>
													<option value="UM">US Minor Outlying Islands</option>
													<option value="UT">Utah</option>
													<option value="VT">Vermont</option>
													<option value="VI">Virgin Islands, US</option>
													<option value="VA">Virginia</option>
													<option value="WA">Washington</option>
													<option value="WV">West Virginia</option>
													<option value="WI">Wisconsin</option>
													<option value="WY">Wyoming</option>
													<option value="YT">Yukon Territory</option>
												</select>						  
											</td>
											<td></td>
									 	</tr>
									 	<tr>
										 		<td><form:input cssClass="form-control" path="postalCode" name="postalCode" id="postalCode" maxlength="20" placeholder="Postal Code" /></td>
										 		<td>&nbsp; </td>
										 		<td>&nbsp; </td>
										 		<td>&nbsp; </td>
										 </tr>
										 
									 					
									</table>
									<form:input style="display:none;" path="tcDescription" id="userTC" value="${waiversAndTC.tcDescription}" />	
									<form:input style="display:none;" path="productId" id="productIdHidInput" value="" />
									<form:input style="display:none;" path="paymentMethodId" id="paymentMethodIdHidInput" value="" />
									
									<%-- <form:input style="display:none;" path="signup[0].finalAmount" id="progFinalAmtIdHidInput" value="" /> --%>
								</form:form>
								</div>				
								<div id="loginDiv" style="display:none;">
									<%@ include file="../../views/customer/memberLogin.jsp" %> 
								</div>
				                     			
				        </div>
				  			<div id="step-3">
				            	<div class="termsDiv">           	
				            	</div>           	         	
				            	<div>
				            		<span>
				            			<form id="tcForm" action="#" class="cmxform" style="margin-top : 10px;"> 
				            				<table border="0">
						            			<tr>
											 		<td><input class="form-control bootstrap-Inputcss" name="tcname" id="tcname" maxlength="50" placeholder="Full Name" style="width: 230px;"/> </td>
											 		<td>&nbsp; </td>							 		
												 </tr> 
												 
											 </table>             				
				            			</form>
				            		</span>
				            	</div>
				        		<input type="checkbox" name="chkTermsAndCond" style="margin-top: 10px;">&nbsp;I accept terms and conditions
				        		<div style="height:20px;"></div>            
				        	</div>    
				        	
				        	<div id="step-4">
				        		<div id="purchase_info" style="height: 260px;">
									
									<div class="addcarddiv">
										<div style="height:20px;">Please select Payment Method</div>
										<select id="paymentInfoRadio" name="paymentInfoRadio" style="width:300px;">							
										</select>
									</div>
									<div class="addcarddiv">
										<div style="height:20px;">Please select Payment Frequency</div>
										<select id="paymentFrequencySelect" name="paymentFrequencySelect" style="width:150px;">	
											<option value="Monthly" selected="selected">Monthly</option>
											<option value="Annual">Annual</option>						
										</select>
									</div>
									<div class="addcarddiv">
										<div style="height:20px;">Start Date</div>
										<input type="text" id="start" name="startDate" style="width:150px;">
									</div>
									<div class="addcarddiv" id="endDateDiv" style="display:none;">
										<div style="height:20px;">End Date</div>
										<input type="text" id="end" name="type" style="width:150px;">
									</div>
									<br /><br />
										
									<div id="addcard" style="margin-top:10px; margin-bottom:10px; height:44px; display:none;   float: left; ">
										  
											
											<div style="height:50px;">
												<div class="addcarddiv">
													<div style="height:20px;">Name on card</div>
													<div><input type="text" class="k-textbox" placeholder="Full Name on Card" name="fullName" id="fullName" value="" tabIndex="1"></div>
												</div>
												<div class="addcarddiv">
													<div style="height:20px;">Card Number</div>
													<div><input type="text" class="k-textbox" placeholder="Card Number" name="cardNumber" id="cardNumber" value="" tabIndex="2"></div>
												</div>
												<div class="addcarddiv">
													<div style="height:20px;">Expiration date</div>
													<div>
														<span>
															<select id="expirationMonth" name="expirationMonth" style="width:50px;">
											                      <option value="01">01</option>
											                      <option value="02">02</option>
											                      <option value="03">03</option>
											                      <option value="04">04</option>
											                      <option value="05">05</option>
											                      <option value="06">06</option>
											                      <option value="07">07</option>
											                      <option value="08">08</option>
											                      <option value="09">09</option>
											                      <option value="10">10</option>
											                      <option value="11">11</option>
											                      <option value="12">12</option>
															</select>
														</span>
														<span>
															<select id="addCardExpirationYear" name="expirationYear" style="width:70px;">																
															</select>
														</span>
													</div>
												</div>
												<div class="addcarddiv">
													<div style="height:20px;">Security Code</div>
													<div><input type="password" class="k-textbox" placeholder="Security Code" name="securityCode" id="securityCode" value="" tabIndex="3"></div>
												</div>
											</div>
											
											<div style="height:50px;">
												<div class="addcarddiv">
													<div style="height:20px;">Address Line 1</div>
													<div><!-- <textarea placeholder="Billing AddressLine1" name="billingAddressLine1" id="billingAddressLine1" class="k-textbox" style="width: 279px; height: 46px;"></textarea> -->
														<input type="text" class="k-textbox" placeholder="Billing AddressLine1" name="billingAddressLine1" id="billingAddressLine1" value="" tabIndex="4">
													</div> 
												</div>
												<div class="addcarddiv">
													<div style="height:20px;">Address Line 2</div>
													<div><input type="text" class="k-textbox" placeholder="Billing AddressLine2" name="billingAddressLine2" id="billingAddressLine2" value="" tabIndex="5"></div> 
												</div>
												<div class="addcarddiv">
													<div style="height:20px;">City</div>
													<div><input type="text" class="k-textbox" placeholder="Billing City" name="billingCity" id="billingCity" value="" tabIndex="6"></div> 
												</div>
												<div class="addcarddiv" style="width:45px;">
													<div style="height:20px;">State</div>
													<div><input type="text" class="k-textbox" placeholder="" name="billingState" id="billingState" value="" style="width:45px;" tabIndex="7"></div> 
												</div>
												<div class="addcarddiv" style="width:60px">
													<div style="height:20px;">Zip</div>
													<div><input type="text" class="k-textbox" placeholder="Zip" name="billingZip" id="billingZip" value="" style="width:60px;" tabIndex="8"></div> 
												</div>
												<div class="addcarddiv" style="display:none;">
													 <span id="paymentTokenIdSpan"></span>
													 <span id="paymentAmountSpan"></span>
												</div>
												
											</div>
											
											<div style="height:50px;">
												
												<div id="savecardcheckbox" class="addcarddiv" style="width:124px">
													<div><input type="checkbox" checked="checked" disabled="disabled" name="SaveCard" id="SaveCard">&nbsp;&nbsp;Save Card</div>
													
												</div>
												<div id="nickname" class="addcarddiv" >
													<div style="height:20px;">Nick Name</div>
													<div><input type="text" class="k-textbox" placeholder="Nick Name" name="nickName" id="nickName" value=""></div> 
												</div>
											</div>
										
									</div>
									
									<span style=" float: right; margin-right: 100px;padding: 13px;">
										<table style="margin:0px; padding: 7px; border: 1px solid #ddd;" class="summary-table-border">							
												<tbody style="min-height: 300px;">	
													<tr>
														<td colspan="2" style="text-align: center;">
															 <h3>
															   Payment Information
															 </h3>
														</td>
														<td></td>
													</tr>							
													<tr>
														<td ><span><b>Join Fee</b></span></td>
														<td id="paymentJoinFeeTd"></td>
													</tr>
													<tr>
														<td><span><b>Tier Price</b></span></td>
														<td id="paymentTierTd"></td>
													</tr>
													<tr>
														<td><span><b>Payment Frequency</b></span></td>
														<td id="paymentFrequencyTd"></td>
													</tr>
													<tr>
														<td><span><b>Total Price</b></span></td>
														<td ><span></span><span id="paymentTotalPriceTd"></span></td>
													</tr>														
												</tbody>
										</table>
									</span>
								</div>
				        	<!--        	
				            	<div class="bootstrap-frm" style="max-width : auto;">
									<h2 style="color: #888; text-align: center;">Summary</h2>					
										<table width="100%">							
											<tbody id="confirmationDataBody" style="min-height: 300px;">
											
												<tr>
													<td width="50%">
												 		<h2>
												   			<span>PRODUCT INFO</span>
												 		</h2>
												 	</td>
													<td ></td>
												</tr>
											
												<tr>
													<td width="50%"><span><b>Product Id</b></span></td>
													<td id="productIdTd"></td>
												</tr>
												<tr>
													<td><span><b>Product Name</b></span></td>
													<td id="productNameTd"></td>
												</tr>								
												<tr>
													<td><span><b>Product Description</b></span></td>
													<td id="productDescriptionTd"></td>
												</tr>
												<tr>
													<td><span><b>Product Type</b></span></td>
													<td id="productTypeTd"></td>
												</tr>
												<tr>
													<td><span><b>Product Duration</b></span></td>
													<td id="productDurationTd"></td>
												</tr>
												<tr>
													<td><span><b>Product Price</b></span></td>
													<td id="productPriceTd"></td>
												</tr>	
											
											<tr>
													<td width="50%">
									 <h2>
									   <span>USER INFO</span>
									 </h2></td>
													<td ></td>
												</tr>
											
												<tr>
													<td width="50%"><span><b>First Name</b></span></td>
													<td id="firstNameTd"></td>
												</tr>
												<tr>
													<td><span><b>Last Name</b></span></td>
													<td id="lastNameTd"></td>
												</tr>								
												<tr>
													<td><span><b>Date of Birth</b></span></td>
													<td id="dobTd"></td>
												</tr>
												<tr>
													<td><span><b>Phone Number</b></span></td>
													<td id="phoneNumberTd"></td>
												</tr>
												<tr>
													<td><span><b>Email</b></span></td>
													<td id="emailTd"></td>
												</tr>	
																	
												<tr>
													<td><h2>
									   <span>ADDRESS</span>
									 </h2> </td>
													<td ></td>
												</tr>
												
												
												<tr>
													<td><span><b>Address Line 1</b></span></td>
													<td id="addressLine1Td"></td>
												</tr>
												<tr>
													<td><span><b>Address Line 2</b></span></td>
													<td id="addressLine2Td"></td>
												</tr>
												<tr>
													<td><span><b>City</b></span></td>
													<td id="cityTd"></td>
												</tr>
												<tr>
													<td><span><b>State</b></span></td>
													<td id="stateTd"></td>
												</tr>
												<tr>
													<td><span><b>Postal Code</b></span></td>
													<td id="postalCodeTd"></td>
												</tr>
												<tr>
													<td></td>
													<td ><span id="" style="float:right; margin-top:10px;"><a href="/ymca-web/login">Go to Login Page</a></span></td>
												</tr>
												
											</tbody>
										</table> 
									</div>	 -->	
								         
				        	</div> 
				        	
				        	<div id="step-5">
				            	 <div id="contentFormDiv" >
				            	<div class="border-bottom-h3" style="margin-bottom : 0px;">
				        		<h2 style="color: #888; text-align: center; margin-top: 5px; margin-bottom: 5px;">Summary</h2>	
				        	</div>
				        	<div style="max-width : auto;" class="memberSummaryPage">
									<table style="" border="0" width="100%">							
												<tbody >	
													<tr>
														<td width="50%">
															<table style="/* float: left; margin-left: 10px; */"
																class="summary-table-border">
																<tbody style="min-height: 300px;">
																	<tr>
																		<td colspan="2" style="border-bottom: 1px solid #ddd;">
																			<h3>USER INFORMATION</h3>
																		</td>
																		<td></td>
																	</tr>

																	<tr>
																		<td><span><b>First Name</b></span></td>
																		<td id="firstNameTd"></td>
																	</tr>
																	<tr>
																		<td><span><b>Last Name</b></span></td>
																		<td id="lastNameTd"></td>
																	</tr>
																	<tr>
																		<td><span><b>Date of Birth</b></span></td>
																		<td id="dobTd"></td>
																	</tr>
																	<tr>
																		<td><span><b>Phone Number</b></span></td>
																		<td id="phoneNumberTd"></td>
																	</tr>
																	<tr>
																		<td><span><b>Email</b></span></td>
																		<td id="emailTd"></td>
																	</tr>
																</tbody>
															</table>

														</td>
														<td width="50%">
															<table style="/* float: left; margin-left: 10px; */"
																class="summary-table-border">
																<tbody style="min-height: 300px;">
																	<tr>
																		<td colspan="2" style="border-bottom: 1px solid #ddd;"><h3>
																				ADDRESS INFORMATION</h3></td>
																		<td></td>
																	</tr>


																	<tr>
																		<td><span><b>Address Line 1</b></span></td>
																		<td id="addressLine1Td"></td>
																	</tr>
																	<tr>
																		<td><span><b>Address Line 2</b></span></td>
																		<td id="addressLine2Td"></td>
																	</tr>
																	<tr>
																		<td><span><b>City</b></span></td>
																		<td id="cityTd"></td>
																	</tr>
																	<tr>
																		<td><span><b>State</b></span></td>
																		<td id="stateTd"></td>
																	</tr>
																	<tr>
																		<td><span><b>Postal Code</b></span></td>
																		<td id="postalCodeTd"></td>
																	</tr>

																</tbody>
															</table>
														</td>
													</tr>							
													<tr>
														<td width="50%">
															<table style="/* float: left; margin-left: 5px; */"
																class="summary-table-border">
																<tbody style="min-height: 300px;">
																	<tr>
																		<td colspan="2" style="border-bottom: 1px solid #ddd;">
																			<h3>PRODUCT INFORMATION</h3>
																		</td>
																		<td></td>
																	</tr>
																	<tr style="display:none">
																		<td ><span><b>Product Id</b></span></td>
																		<td id="productIdTd"></td>
																	</tr>
																	<tr>
																		<td><span><b>Product Name</b></span></td>
																		<td id="productNameTd"></td>
																	</tr>
																	<tr>
																		<td><span><b>Product Description</b></span></td>
																		<td id="productDescriptionTd"></td>
																	</tr>
																	<tr>
																		<td><span><b>Product Type</b></span></td>
																		<td id="productTypeTd"></td>
																	</tr>
																	<tr>
																		<td><span><b>Product Duration</b></span></td>
																		<td id="productDurationTd"></td>
																	</tr>
																	<tr>
																		<td><span><b>Product Price</b></span></td>
																		<td id="productPriceTd"></td>
																	</tr>
																</tbody>
															</table>

														</td>
														<td width="50%">
															<table style="/* float: left; margin-left: 5px; */"
																class="summary-table-border">
																<tbody style="min-height: 300px;">
																	<tr>
																		<td colspan="2" style="border-bottom: 1px solid #ddd;">
																			<h3>PAYMENT INFORMATION</h3>
																		</td>
																		<td></td>
																	</tr>
																						<!-- <tr>
																		<td ><span><b>Product Id</b></span></td>
																		<td id="productIdTd"></td>
																	</tr> -->
																	<tr>
																		<td><span><b>Join Fee</b></span></td>
																		<td id="sumJoinFeeTd"></td>
																	</tr>
																	<tr>
																		<td><span><b>Tier Price</b></span></td>
																		<td id="sumTierPriceTd"></td>
																	</tr>
																	<tr>
																		<td><span><b>Payment Frequency</b></span></td>
																		<td id="sumPaymentFreqTd"></td>
																	</tr>
																	<tr>
																		<td><span><b>Total Price</b></span></td>
																		<!-- <td id="sumTotalPriceTd"></td> -->
																		<td><span></span><span id="sumTotalPriceTd"></span></td>
																	</tr>

																</tbody>
															</table>

														</td>
													</tr>
																										
												</tbody>
										</table>
										
							</div>
				           </div>           
				           <div class="bootstrap-frm" id="paymentSuccessDiv" style="display:none">
							<h2><span>Payment Process Completed Successfully.</span></h2>
						</div>
						<div class="bootstrap-frm" id="paymentFailuresDiv" style="display:none">
							<h2><span>Payment process Failed. Please try after sometime. </span></h2>
						</div> 	
				            	                 
				        	</div>                   
				  			
				  		</div>
				  		
				<!-- End SmartWizard Content -->  		
				 		
				</td></tr>
				</table>
			
			</div>
		</div>
	</div>
	
<script id="product-select-ErrorBox" type="text/x-kendo-template">
    <p class="error-message-p">Please select the Product before Proceeding</p>
	
    <div class="confirmbutton" align="center"><button class="confirm-product-select k-button" style=" width: 35%;">Ok</button>   
</script>

<script id="terms-conditions-ErrorBox" type="text/x-kendo-template">
    <p class="error-message-p">Please agree the terms and conditions before Proceding</p>
	
    <div class="confirmbutton" align="center"><button class="confirm-terms-conditions k-button" style=" width: 35%;">Ok</button>   
</script>

<script type="text/javascript">
var emailValid = "false";
var loginValid = "false";
var signInSelected = "false";
var isLoggedIn = "false";
var paymentFreq1 = $("#paymentFrequencySelect").data("kendoDropDownList");

/* $("#grid").data("kendoGrid").dataSource.data([ ]);

var productsGrid = $('#grid').data('kendoGrid');
var dataSource = productsGrid.dataSource;
dataSource.add({ id: "testId", productName: 'A Johns Product 1', productDescription: "desc"});
dataSource.sync(); */

$(document).ready(function(){	
	$("#phoneNumber").mask("(999) 999-9999");
    $("#dob").kendoDatePicker();
    $("#location").kendoDropDownList();    
    $("#prefLocation").kendoDropDownList();
    
    var locationDropdownlist = $("#location").data("kendoDropDownList");
    locationDropdownlist.select(0);
    var prefLocationDropdownlist = $("#prefLocation").data("kendoDropDownList");
    prefLocationDropdownlist.select(0);
    $("#prefLocation").closest(".k-widget").hide(); 
    $("#paymentFrequencySelect").kendoDropDownList();
    var paymentFreq = $("#paymentFrequencySelect").data("kendoDropDownList");
    
    var currentYear = new Date().getFullYear();
	currentYear = parseInt(currentYear.toString().substring(2, 4));
	for(var i=0; i<30 ; i++){
		$('#addCardExpirationYear').append($('<option>', {value: currentYear,text: currentYear}));
		currentYear = currentYear +1;
	}
	$("#addCardExpirationYear").kendoDropDownList();    
    $("#expirationMonth").kendoDropDownList();
          
    $("#paymentFrequencySelect").on('change',function(e){   	
    	$("#paymentFrequencyTd").html(paymentFreq.text());
    	$("#sumPaymentFreqTd").html(paymentFreq.text());    	
    	if(paymentFreq.text() == 'Annual'){
    		$("#endDateDiv").css("display","inline");
    		if($("#paymentAmountSpan").text() != null){
    			$("#paymentTotalPriceTd").html("$ "+parseInt($("#paymentAmountSpan").text()) * 12);
    			$("#sumTotalPriceTd").html("$ "+parseInt($("#paymentAmountSpan").text()) * 12);
    		}
    		
    		//$("#end").attr("value", "");
    	}else{
    		$("#endDateDiv").css("display","none");
    		$("#paymentTotalPriceTd").html("$ "+$("#paymentAmountSpan").text());
    		$("#sumTotalPriceTd").html("$ "+$("#paymentAmountSpan").text());
    		//$("#end").attr("value", "");
    		var str = $("#start").val();

            if(str != null) {

                var parts = str.split("-");

                var year = parts[0] && parseInt( parts[0], 10 );
                var month = parts[1] && parseInt( parts[1], 10 );
                var day = parts[2] && parseInt( parts[2], 10 );
                var duration = 1;

                if( day <= 31 && day >= 1 && month <= 12 && month >= 1 ) {

                    var expiryDate = new Date( year, month - 1, day );
                    expiryDate.setFullYear( expiryDate.getFullYear() + duration );

                    var day = ( '0' + expiryDate.getDate() ).slice( -2 );
                    var month = ( '0' + ( expiryDate.getMonth() + 1 ) ).slice( -2 );
                    var year = expiryDate.getFullYear();

                    $("#end").val(year + "-" +month + "-" + day);
                    $("#end").data('kendoDatePicker').value($("#end").val());

                } else {
                    alert("Error Occured while setting Membership End Date");
                }
            }
    	}
    });
    
    
    var today = kendo.date.today();
    var d = new Date();
    d.setMonth(d.getMonth() + 2);
    var start = $("#start").kendoDatePicker({
    	format: "yyyy-MM-dd",
    	value: today,      
    	max: d,
    	change: function (e) {
    		var str = $("#start").val();
    		$("#progStartDateIdHidInput").attr("value", $("#start").val());    		
            if(str != null) {

                var parts = str.split("-");

                var year = parts[0] && parseInt( parts[0], 10 );
                var month = parts[1] && parseInt( parts[1], 10 );
                var day = parts[2] && parseInt( parts[2], 10 );
                var duration = 1;

                if( day <= 31 && day >= 1 && month <= 12 && month >= 1 ) {

                    var expiryDate = new Date( year, month - 1, day );
                    expiryDate.setFullYear( expiryDate.getFullYear() + duration );

                    var day = ( '0' + expiryDate.getDate() ).slice( -2 );
                    var month = ( '0' + ( expiryDate.getMonth() + 1 ) ).slice( -2 );
                    var year = expiryDate.getFullYear();

                    $("#end").val(year + "-" +month + "-" + day);
                    $("#end").data('kendoDatePicker').value($("#end").val());

                } else {
                    alert("Error Occured while setting Membership End Date");
                }
            }
        },
    	parseFormats: ["MM/dd/yyyy", "dd/MM/yyyy"]
    });    
    var end = $("#end").kendoDatePicker({
    	format: "yyyy-MM-dd",
    	value: today,                
    	parseFormats: ["MM/dd/yyyy", "dd/MM/yyyy"]
    });
    
    var eventMethod = window.addEventListener ? "addEventListener" : "attachEvent";
	var eventer = window[eventMethod];
	var messageEvent = eventMethod == "attachEvent" ? "onmessage" : "message";
	eventer(messageEvent,function(e) {
		var key = e.message ? "message" : "data";
		var data = e[key];
		$("#contentFormDiv").css("display", "none");			
		if(data.view.toString() == "Success"){
			$("#paymentSuccessDiv").css("display", "block");
		}
		if(data.view.toString() == "Failure"){
			$("#paymentFailuresDiv").css("display", "block");
		}
		//$("#form_container").html("Success Redirection " + data.view);			
	},false);
   
    $("#location").on('change',function(e){    	    	 
    	$('#grid').data('kendoGrid').dataSource.read({"locationId":$("#location").kendoDropDownList().val()});
    	$("#grid").data("kendoGrid").refresh();
    	var grid = $("#grid").data("kendoGrid");
    	var count = grid.dataSource.total();    	
    	if(count != null && count == 0){
    		/* var tableDataHtml = '';
	    	tableDataHtml += '<tr role="row" data-uid="44b95541-b9d3-45df-8dc2-093934cabdbb"><td role="gridcell" colspan="3">No Product Information found for selected Location. Please select different Location.</td></tr>';
	    	$("#grid tbody").html(tableDataHtml); */
    	}	    
    	
    	if(locationDropdownlist.text() == 'All Branches' || locationDropdownlist.text() == 'Bay Area'){
    		if(locationDropdownlist.text() == 'All Branches'){
    			$("#prefLocation").html("");
    			$("#prefLocation").html($("#allLocations").html());
    			$("#prefLocation").kendoDropDownList();
    		}
    		if(locationDropdownlist.text() == 'Bay Area'){
    			$("#prefLocation").html("");
    			$("#prefLocation").html($("#bayAreaLocations").html());
    			$("#prefLocation").kendoDropDownList();
    		}	    		
    		$("#prefLocation").closest(".k-widget").show();    		 
    	} else{ 
    		var dropdownlist = $("#prefLocation").data("kendoDropDownList");
    		dropdownlist.select(0);
    		$("#prefLocation").closest(".k-widget").hide();    		
    	}
    });
    
    /* $("#prefLocation").on('change',function(e){
    	//getProductDetails($(this).val());
    }); */    
    
    
	$('#wizard').smartWizard({
		// Properties
		selected: 0,  // Selected Step, 0 = first step   
		keyNavigation: true, // Enable/Disable key navigation(left and right keys are used if enabled)
		enableAllSteps: false,  // Enable/Disable all steps on first load
		transitionEffect: 'slideleft', // Effect on navigation, none/fade/slide/slideleft
		contentURL:null, // specifying content url enables ajax content loading
		contentURLData:null, // override ajax query parameters
		contentCache:true, // cache step contents, if false content is fetched always from ajax url
		cycleSteps: false, // cycle step navigation
		enableFinishButton: false, // makes finish button enabled always
		hideButtonsOnDisabled: true, // when the previous/next/finish buttons are disabled, hide them instead
		errorSteps:[],    // array of step numbers to highlighting as error steps
		labelNext:'Next', // label for Next button
		labelPrevious:'Previous', // label for Previous button
		labelFinish:'Finish',  // label for Finish button        
		noForwardJumping:false,
		ajaxType: 'POST',
		// Events
		onLeaveStep: nextClick, // triggers when leaving a step
		onShowStep: null,  // triggers when showing a step
		onFinish: registerContact,  // triggers when Finish button is clicked
		includeFinishButton : true   // Add the finish button
	});
	
	var validator2 = $("#tcForm").validate({
		debug: true,
		errorElement: "em",			
		errorPlacement: function(error, element) {			
			element.addClass("inputErrorr");
			error.appendTo(element.parent("td").next("td"));
			element.parent("td").next("td").addClass("textMsgError");			
		},
		success: function(label, element) {			
			var $element = $(element);
			var $label = $(label);
	       	$element.removeClass("inputErrorr");
			$element.removeClass("error");
			$element.addClass("success");
			
			$label.removeClass("textMsgError");
			$label.removeClass("error");
			$label.addClass("success");
			//$("#wizard"). smartWizard("fixHeight");
			
		},
		rules: {
			"tcname": {
				required: true,
				minlength: 2,
				maxlength: 20
			}
		},
		messages: {
			"tcname": {				
				required: "Please enter your Full Name",
				minlength: "Full Name must consist of at least 2 characters",
				maxlength: "Full Name can not be more than 20 characters"
			}
		}
	});	
	var url = "isEmailExists";
	var validator1 = $("#becomeMemberForm").validate({
		debug: true,
		errorElement: "em",			
		errorPlacement: function(error, element) {
			$element = $(element);			
			if($element.attr("id") == "dob"){
				element.addClass("inputErrorr");
				error.appendTo(element.parent().parent().parent().next("td"));
				element.parent().parent().parent().next("td").addClass("textMsgError");
				$element.parent().parent().parent().next("td").css("color","red");
			}else{
				element.addClass("inputErrorr");
				error.appendTo(element.parent("td").next("td"));
				element.parent("td").next("td").addClass("textMsgError");
				$element.parent("td").next("td").css("color","red");
			}
			//$("#wizard"). smartWizard("fixHeight");
			/* element.addClass("inputErrorr");
			error.appendTo(element.parent("td").next("td"));
			element.parent("td").next("td").addClass("textMsgError"); */
		},
		success: function(label, element) {
			//alert("success");
			//label.text("ok!").addClass("success");
			var $element = $(element);
			var $label = $(label);
	       	$element.removeClass("inputErrorr");
			$element.removeClass("error");
			$element.addClass("success");
			
			$label.removeClass("textMsgError");
			$label.removeClass("error");
			$label.addClass("success");
			//$("#wizard"). smartWizard("fixHeight");
			
		},
		rules: {
			"userLst[0].firstName": {
				required: true,
				minlength: 2,
				maxlength: 20
			},
			"userLst[0].lastName": {
				required: true,
				minlength: 2,
				maxlength: 20
			},
			"userLst[0].email" : {
				required: true,
				email: true,
				remote: {
                    url: url,  
                    type:"GET"                    	
                 }
			},
			"userLst[0].password": {
				required: true,
				minlength: 5
			},
			"userLst[0].confirmPassword": {
				required: true,
				minlength: 5,
				equalTo: "#password"
			},
			"userLst[0].dateOfBirth": { 
				required: true,
				check_date_of_birth: true
			},
			"postalCode" : {
				required: true,
				number: true,
				minlength: 5
			},
			"userLst[0].phoneNumber" : "required",			
			"addressLine1" : "required",			
			"city" : "required",
			"state" : "required"
			
		},
		messages: {
			"userLst[0].firstName": {				
				required: "Please enter your First Name",
				minlength: "First Name must consist of at least 2 characters"
			},
			
			"userLst[0].lastName": {				
				required: "Please enter your First Name",
				minlength: "Last Name must consist of at least 2 characters"
			},
			"userLst[0].email" : {
				required: "Please enter your email address",
				email : "Please enter valid email address",
				remote: "You appear to be associated with a customer account already.  Please speak with the primary contact for that account"
				/* ,
				check_Email_valid : "You appear to be associated with a customer account already.  Please speak with the primary contact for that account" */
			},
			"userLst[0].phoneNumber" : "Please enter your Phone Number",			
			"userLst[0].password": {
				required: "Please provide a password",
				minlength: "Your password must be at least 5 characters long"
			},
			"userLst[0].confirmPassword": {
				required: "Please provide a password",
				minlength: "Your password must be at least 5 characters long",
				equalTo: "Please enter the same password as above"
			},
			"userLst[0].dateOfBirth": { 
				required: "Please enter your Date of Birth",
				check_date_of_birth: "Age should be more than 18 Years"
			},
			"postalCode" : {
				required: "Please enter Postal Code",
				number: "Please enter numbers only",
				minlength: "Postal Code must consist of at least 5 characters"
			},
			"addressLine1" : "Please enter address line 1",			
			"city" : "Please enter yout City",
			"state" : "Please enter your State",
			agree: "Please accept our policy"
		}
	});	
	//"userLst[0].dateOfBirth" : "required",
	//"userLst[0].dateOfBirth" : "Please enter your Date of Birth",
	$.validator.addMethod("check_date_of_birth", function(value, element) {

	    /* var day = $("#dob_day").val();
	    var month = $("#dob_month").val();
	    var year = $("#dob_year").val(); */
	    //11/18/2014
	    var inpDate = $("#dob").val();
	    var day;
    	var month;
    	var year;
    	var age =  18;
	    if(inpDate != null){
	    	var dateArr = inpDate.split("/");	    	
	    	month = dateArr[0];
	    	day = dateArr[1];
	    	year = dateArr[2];
	    }

	    var mydate = new Date();
	    mydate.setFullYear(year, month-1, day);

	    var currdate = new Date();
	    currdate.setFullYear(currdate.getFullYear() - age);

	    return currdate > mydate;

	}, "You must be at least 18 years of age.");
	
	/* function resizeGrid(d) {
	    var gridElement = $("#grid");
	    var dataArea = gridElement.find(".k-grid-content");
	    var newHeight = gridElement.parent().innerHeight() - 2;
	    var diff = gridElement.innerHeight() - dataArea.innerHeight();
	    gridElement.height(newHeight);
	    dataArea.height(newHeight - diff);
	    return d;
	}
	
	$(window).resize(function(){
	    resizeGrid();
	}); */
	
	var validator3 = $("#loginForm").validate({
		debug: true,
		errorElement: "em",			
		errorPlacement: function(error, element) {
			$element = $(element);	
			element.addClass("inputErrorr");
			error.appendTo(element.parent("td").next("td"));
			element.parent("td").next("td").addClass("textMsgError");
			$element.parent("td").next("td").css("color","red");
		},
		success: function(label, element) {			
			var $element = $(element);
			var $label = $(label);
	       	$element.removeClass("inputErrorr");
			$element.removeClass("error");
			$element.addClass("success");
			
			$label.removeClass("textMsgError");
			$label.removeClass("error");
			$label.addClass("success");			
		},
		rules: {			
			"username" : {
				required: true,
				email: true				
			},
			"password": {
				required: true,
				minlength: 5
			}			
		},
		messages: {			
			"username" : {
				required: "Please enter your email address",
				email : "Please enter valid email address"			
			},
						
			"password": {
				required: "Please provide a password",
				minlength: "Your password must be at least 5 characters long"
			}
		}
	});	

	
	var location = $("#location").kendoDropDownList().val();
	$("#grid").kendoGrid({
		dataSource: GetRemoteData($("#location").kendoDropDownList().val()),
        height: 270,
        /* filterable: true, */
        sortable: true,
        pageable: true,
        /* dataBound: resizeGrid, */
        columns: [
			{ 			
				template: "<input type='radio' name='termsAndCondition' class='termsAndCondition' />", 
				width: "3%"
			},      
			{ field: "id", title: "ID",width: "0%", hidden: true }, 
			{ field: "productName", title: "Product Name",width: "30%" },
			{ field: "productDescription", title: "Product Description",width: "53%" },
			{ field: "productType", title: "Product Type",width: "0%", hidden: true }, 
			{ field: "productDuration", title: "Product Duration",width: "0%", hidden: true }, 
			{ field: "productPrice", title: "Price",width: "14%" },
			{ field: "tandc", title: "T & C", hidden: true },
			{ field: "pricingJsonArray", title: "Pricing Breakup", hidden: true }	
	        
    	]        
    });
	
	 $('body').on( "click", "input.termsAndCondition", function() { 	 
         if($('input:radio[name=type]:checked')){        	
         	var $termsVar = $(this).parent().parent().find('td');
         	$termsVar.each(function(index){
         		if(index && index == '1'){
         			$("#productIdTd").html($(this).html());
         			$("#productIdHidInput").attr("value", $(this).html());
         		}
				if(index && index == '2'){
					$("#productNameTd").html($(this).html());     			
				}
				if(index && index == '3'){
					$("#productDescriptionTd").html($(this).html());	
				}
				if(index && index == '4'){
					$("#productTypeTd").html($(this).html());	
				}
				if(index && index == '5'){
					$("#productDurationTd").html($(this).html());	
				}
				if(index && index == '6'){
					$("#productPriceTd").html("$ "+$(this).html());
					$("#paymentAmountSpan").html($(this).html());
					$("#paymentTotalPriceTd").html("$ "+$(this).html());	
					$("#sumTotalPriceTd").html("$ "+$(this).html());
				}				
				if(index && index == '7'){				
					$(".termsDiv").html($(this).text());
				}
				if(index && index == '8'){				
					var priceRuleStr = $(this).text();
					if(priceRuleStr != null){
						var priceRuleArr= priceRuleStr.split(";;");
						for(var i = 0; i<priceRuleArr.length; i++){
							if(priceRuleArr[i] != null && priceRuleArr[i] != ""){
								var ruleArray = priceRuleArr[i].split(":");
								var ruleName = ruleArray[0];
								var rulePrice = ruleArray[1];	
								if(ruleName == 'Join Fee'){
									$("#paymentJoinFeeTd").html("$ "+rulePrice);
									$("#sumJoinFeeTd").html("$ "+rulePrice);									
								}
								if(ruleName == 'Tier 1' || ruleName == 'Tier 2' || ruleName == 'Tier 3'){
									$("#paymentTierTd").html("$ "+rulePrice);
									$("#sumTierPriceTd").html("$ "+rulePrice);									
								}						
							}
						}
					}
				}
				
         	    //console.log($(this).html())
         	});
         }
	 });
	 
	 $('body').on( "click", "#memberSignInSpan", function() { 	 
		 signInSelected = "true";
		 $('#loginDiv').css("display","inline");
		 $('#registerDiv').css("display","none");
	 });
	 
	 $('body').on( "click", "#newMemberSpan", function() { 	 
		 signInSelected = "false";
		 $('#loginDiv').css("display","block");
		 $('#registerDiv').css("display","inline");
	 });
	
  	
	$("#wizard"). smartWizard("fixHeight");
      
	});
	
function GetRemoteData(location) {	
   var  source = new kendo.data.DataSource({
        autoSync: true,
        transport: {
            read: {
                type: "GET",
                url: "getProductDetailsByLocation",
                data: {"locationId" : $("#location").kendoDropDownList().val()},
                dataType: "json",                
                cache: false
            }
            
        },
        schema: {
        	 model: {
	        	fields: {
	        		radioButton : {},
	            	id: { type: "string" }, 
	            	productName: { type: "string" },
	            	productDescription: { type: "string" },
	            	productType: { type: "string" },
	            	productDuration: { type: "string" }, 
	            	productPrice: { type: "string" },
	            	tandc : { type: "string" },
	            	pricingJsonArray : { type: "string" }
	            	
	            }
        	 }
       
    	},
        
        pageSize: 2
    });
    source.fetch(function () {
        var data = this.data();
    });
    return source;
}

function registerContact(){	
	if(!$("input[name='chkTermsAndCond']:checked").val()){ 
			var kendoWindow = $("<div />").kendoWindow({
	        	title: "Error",
	        	resizable: false,
	        	modal: true,
	        	width:400
	        });
	
  			kendoWindow.data("kendoWindow")
	         .content($("#terms-conditions-ErrorBox").html())
	         .center().open();
  			
	        kendoWindow
	        .find(".confirm-terms-conditions")
	        .click(function() {
	        	if ($(this).hasClass("confirm-terms-conditions")) {         		
	        		kendoWindow.data("kendoWindow").close();
	        	}
	        })
	        .end();
	        $('#wizard').smartWizard('setError',{stepnum:2,iserror:true});
			$('#wizard').smartWizard('showMessage','Please agree the terms and conditions before Proceeding');			
 			return false;
 	}else{	
 		$('#wizard').smartWizard('setError',{stepnum:2,iserror:false});
		$('#wizard').smartWizard('hideMessage');		
		$("#progFinalAmtIdHidInput").attr("value", $("#paymentTotalPriceTd").text());	
		$("#progStartDateIdHidInput").attr("value", $("#start").val());
		
		/* if($("#paymentInfoRadio").val()!='New'){			
			$.ajax({
				  type: "POST",
				  url: "processPaymentByTokenId",	
				  data: { token: $("#paymentTokenIdSpan").text(), totalAmount : $("#paymentAmountSpan").text()},
				  success: function( data ) {
					  var paymentMethodHtml = '';
					  if(data != null && data.responseText == "APPROVED"){					  
					      alert(data.responseText);	
					      alert(data.transId);
					      alert(data.actCode);
					  }else {
						  var errorMsg = '';
						  //if(data != null && data.responseText == "UNKNOWN TOKEN"){					  
							//  errorMsg = "ActionCode&nbsp;:&nbsp;<b>"+data.actCode+"</b>&nbsp;Error message&nbsp;:&nbsp;"+data.responseText;
						  //}else if(data != null && data.responseText == "INVALID MESSAGE TYPE"){
							//  errorMsg = "";
						  //}else if(data != null && data.responseText == "DECLINED"){
							//  errorMsg = "";
						  //}else{
							 // errorMsg = "";
						  //} 
						  
						  errorMsg += "Error occurred while processing Payment.<br />";
						  errorMsg += "ActionCode :<b>"+data.actCode+"</b> Error message : "+data.responseText;						  
						  $("p.payment-Error-Box-msg-p").html(errorMsg);						  
						  var kendoWindow = $("<div />").kendoWindow({
					        	title: "Error",
					        	resizable: false,
					        	modal: true,
					        	width:400
					        });
					
				  			kendoWindow.data("kendoWindow")
					         .content($("#payment-Error-Box").html())
					         .center().open();
				  			
					        kendoWindow
					        .find(".confirm-payment-process")
					        .click(function() {
					        	if ($(this).hasClass("confirm-payment-process")) {  
					        		$("#payment-Error-Box").css("display", "none");
					        		kendoWindow.data("kendoWindow").close();
					        	}
					        })
					        .end();
					        $('#wizard').smartWizard('goToStep',4);
					        
					  }
				  },
				  error: function( xhr,status,error ){
					  $("#tcloginErrorSpan").css("display", "block");	
					  $( "#tcloginErrorSpan" ).html("There was some error. Please try again later");	
					  $(".k-loading-mask").hide();								  		 
				  }
			});
		}else{
			var jsonData = {
				name : $("#fullName").val(),
				cardNum : $("#cardNumber").val(),
				cscNumber : $("#securityCode").val(),
				AddressLine1 : $("#billingAddressLine1").val(),
				AddressLine2 : $("#billingAddressLine2").val(),
				City : $("#billingCity").val(),
				state : $("#billingState").val(),
				zipcode : $("#billingZip").val(),
				amount : $("#paymentTotalPriceTd").text() + ".00",
				expMonth : $("#expirationMonth").val(),
				expYr : $("#addCardExpirationYear").val()	
			};
			//console.log(jsonData);
			var win = document.getElementById("childIframeId").contentWindow;
			win.postMessage(jsonData, '*'); 				
			//document.forms["becomeMemberForm"].submit();
		}
		 */
		document.forms["becomeMemberForm"].submit();
		return true;
 	}
}

function nextClick(obj, context){	
	//$("#wizard"). smartWizard("fixHeight");	
	//$("#paymentTotalPriceTd").html($("#paymentAmountSpan").text());	
	$("#sumTotalPriceTd").html($("#paymentTotalPriceTd").text());	
	var paymentFreq2 = $("#paymentFrequencySelect").data("kendoDropDownList");
    $("#paymentFrequencyTd").html(paymentFreq2.text());
    $("#sumPaymentFreqTd").html(paymentFreq2.text());
	$(".stepContainer").height($(".stepContainer").find("div:not(:hidden)").height());
	if( context.fromStep == 1 && context.toStep == 2 ){	
		if(!$("input[name='termsAndCondition']:checked").val()){	              	
		 	var kendoWindow = $("<div />").kendoWindow({
		       	title: "Error",
		       	resizable: false,
		       	modal: true,
		       	width:400
		       });
	
	  		kendoWindow.data("kendoWindow")
	        .content($("#product-select-ErrorBox").html())
	        .center().open();
	  			
	       kendoWindow
	       .find(".confirm-product-select")
	       .click(function() {
	       	if ($(this).hasClass("confirm-product-select")) {         		
	       		kendoWindow.data("kendoWindow").close();
	       	}
	       })
	       .end()					        
	       
	       $('#wizard').smartWizard('setError',{stepnum:1,iserror:true});
	       //$("#wizard"). smartWizard("fixHeight");	
		   return false;
			
         }else{
         	$('#wizard').smartWizard('setError',{stepnum:1,iserror:false});	
         	//$("#wizard"). smartWizard("fixHeight");	
    		return true;
        } 
    }else if( context.fromStep == 2 && context.toStep == 3 ){
    	if(signInSelected == "true"){
    		if(!$("#loginForm").valid()) {
    			$('#wizard').smartWizard('setError',{stepnum:2,iserror:true});		
    			return false;
    		} else if(isLoggedIn == 'false'){
    			$('#wizard').smartWizard('setError',{stepnum:2,iserror:true});	
    			$("#statusBlock").css("display", "block");	
		  		$("#tcloginErrorSpan").css("display", "block");	
				$( "#tcloginErrorSpan" ).html("Please login");
    			return false;
    		} else {
    			$("#statusBlock").css("display", "none");	
   			 	$("#tcloginErrorSpan").css("display", "none");	
   			 	$( "#tcloginErrorSpan" ).html("");
   			 
    			$('#wizard').smartWizard('setError',{stepnum:2,iserror:false});	
    			$('#firstNameTd').html($('#firstName').val());
    			$('#lastNameTd').html($('#lastName').val());
    			$('#dobTd').html($('#dob').val());
    			$('#phoneNumberTd').html($('#phoneNumber').val());
    			$('#emailTd').html($('#email').val());
    			
    			$('#addressLine1Td').html($('#addressLine1').val());
    			$('#addressLine2Td').html($('#addressLine2').val());
    			$('#cityTd').html($('#city').val());
    			$('#stateTd').html($('#state').val());
    			$('#postalCodeTd').html($('#postalCode').val());	
    			//$("#wizard"). smartWizard("fixHeight");	
    			return true;
    		}
    	} else{
    		if(!$("#becomeMemberForm").valid()){
    			$('#wizard').smartWizard('setError',{stepnum:2,iserror:true});	
    			//$("#wizard"). smartWizard("fixHeight");	
    			return false;
    		}else{
    			$('#wizard').smartWizard('setError',{stepnum:2,iserror:false});	
    			$('#firstNameTd').html($('#firstName').val());
    			$('#lastNameTd').html($('#lastName').val());
    			$('#dobTd').html($('#dob').val());
    			$('#phoneNumberTd').html($('#phoneNumber').val());
    			$('#emailTd').html($('#email').val());
    			
    			$('#addressLine1Td').html($('#addressLine1').val());
    			$('#addressLine2Td').html($('#addressLine2').val());
    			$('#cityTd').html($('#city').val());
    			$('#stateTd').html($('#state').val());
    			$('#postalCodeTd').html($('#postalCode').val());	
    			
    			var paymentMethodHtml = '';
    			paymentMethodHtml += '<option value="0" >--Select Payment Method--</option>';
    			paymentMethodHtml += '<option value="New" selected="selected">Add New Card</option>';
    			$("#paymentInfoRadio").html(paymentMethodHtml);
    			$("#paymentInfoRadio").kendoDropDownList();  
    			$("#addcard").css("display","inline");
    			//$("#wizard"). smartWizard("fixHeight");	
    			return true;
    		}
    	}
		 
				
	}else if( context.fromStep == 3 && context.toStep == 4 ){	
		 if(!$("input[name='chkTermsAndCond']:checked").val()){ 
				$("#tcForm").valid();
	 			var kendoWindow = $("<div />").kendoWindow({
			        	title: "Error",
			        	resizable: false,
			        	modal: true,
			        	width:400
			        });
			
		  			kendoWindow.data("kendoWindow")
			         .content($("#terms-conditions-ErrorBox").html())
			         .center().open();
		  			
			        kendoWindow
			        .find(".confirm-terms-conditions")
			        .click(function() {
			        	if ($(this).hasClass("confirm-terms-conditions")) {         		
			        		kendoWindow.data("kendoWindow").close();
			        	}
			        })
			        .end();	
			        $('#wizard').smartWizard('setError',{stepnum:3,iserror:true});		
			       // $("#wizard"). smartWizard("fixHeight");	
	     	return false;
	     }else if(!$("#tcForm").valid()){
	 		 $('#wizard').smartWizard('setError',{stepnum:3,iserror:true});
	 		//$("#wizard"). smartWizard("fixHeight");	
			 return false;
	 	 }else{
	    	 $('#wizard').smartWizard('setError',{stepnum:3,iserror:false});	
	    	 //$("#wizard"). smartWizard("fixHeight");	
	    	 return true;
	     }
	}else {	
		//$("#wizard"). smartWizard("fixHeight");	
		return true;
	}
	
}

function forceLower(strInput) {
	strInput.value=strInput.value.toLowerCase();
}
    
</script>
</body>